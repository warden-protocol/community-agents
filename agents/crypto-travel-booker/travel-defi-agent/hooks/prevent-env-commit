#!/bin/sh
# Prevent accidental commits of .env
if git rev-parse --git-dir >/dev/null 2>&1; then
  staged=$(git diff --cached --name-only)
  echo "$staged" | grep -E "(^|/)\.env$" >/dev/null 2>&1
  if [ $? -eq 0 ]; then
    echo "ERROR: .env is staged for commit. Remove it from the index first (git rm --cached .env) and ensure .env is in .gitignore." >&2
    exit 1
  fi
fi
exit 0
